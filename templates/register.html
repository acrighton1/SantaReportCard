<!-- wp:group {"align":"wide","className":"registration-container"} -->
<div class="wp-block-group registration-container">
    
  <!-- wp:heading {"level":2} -->
  <h2>Parent Registration</h2>
  <!-- /wp:heading -->

<!-- wp:html -->
<form id="registration-form" method="POST">
  <input type="text" name="full_name" placeholder="Full Name" required>
  <input type="email" name="email" placeholder="Email" required>
  <input type="password" name="password" placeholder="Password" required>
  <input type="password" name="confirm_password" placeholder="Re-enter Password" required>
  <input type="text" name="referral_code" placeholder="Referral Code (Optional)">
  
  <select name="membership_type" id="membership-type" required>
      <option value="basic" selected>Basic Membership</option>
      <option value="premium">Premium Membership</option>
  </select>

  <p>Total Cost: <span id="membership-cost">$10.99/year</span></p>

  <!-- Stripe Card Element -->
  <div id="card-element">
      <!-- A Stripe Element will be inserted here. -->
  </div>
  <div id="card-errors" role="alert"></div>

  <button type="submit" id="submit-button">Register</button>
</form>

<script>
  document.addEventListener("DOMContentLoaded", function() {
      const membershipSelect = document.getElementById("membership-type");
      const membershipCost = document.getElementById("membership-cost");

      // Define prices
      const prices = {
          basic: "$10.99/year",
          premium: "$29.99/year"
      };

      // Update price when selection changes
      membershipSelect.addEventListener("change", function() {
          const selectedValue = membershipSelect.value;
          membershipCost.textContent = prices[selectedValue];
      });
  });
</script>
<!-- /wp:html -->


<script src="https://js.stripe.com/v3/"></script>
<script>
  // Set your Stripe publishable key
  var stripe = Stripe('pk_test_51QqQq02Melw1opnFyvnDrCtwfdK0CmBbWoJB6bIavc56rrvB5S3hB0KsyH2wBT4fLd8AOc0o7DUW9DWZU6ApUUKT00ABWika6X');  // Replace with your Stripe publishable key
  var elements = stripe.elements();
  var card = elements.create('card');
  card.mount('#card-element');

  // Handle form submission
  var form = document.getElementById('registration-form');
  form.addEventListener('submit', function (event) {
      event.preventDefault();

      // Create payment method
      stripe.createPaymentMethod({
          type: 'card',
          card: card,
      }).then(function(result) {
          if (result.error) {
              // Display error to the user
              document.getElementById('card-errors').textContent = result.error.message;
          } else {
              // Attach the payment method ID to the form data
              var paymentMethodId = result.paymentMethod.id;
              var hiddenPaymentMethodInput = document.createElement('input');
              hiddenPaymentMethodInput.setAttribute('type', 'hidden');
              hiddenPaymentMethodInput.setAttribute('name', 'payment_method_id');
              hiddenPaymentMethodInput.setAttribute('value', paymentMethodId);
              form.appendChild(hiddenPaymentMethodInput);

              // Submit the form after attaching payment method ID
              form.submit();
          }
      });
  });
</script>


</div>
<!-- /wp:group -->

<!-- wp:style -->
<style>
.registration-container {
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  max-width: 400px;
  margin: 50px auto;
}

h2 {
  margin-bottom: 20px;
  font-size: 24px;
  color: #444;
}

input, select, button {
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 16px;
}

button {
  background-color: #ff0000;
  color: #fff;
  border: none;
  cursor: pointer;
}

button:hover {
  background-color: #000000;
}
</style>
<!-- /wp:style -->
